{"version":3,"sources":["../src/index.js"],"names":["express","require","path","fs","favicon","logger","cookieParser","bodyParser","session","passport","LocalStrategy","Strategy","ejwt","jwt","multer","mongo","mongoose","db","connection","userManagement","PageAccess","app","use","static","join","__dirname","json","urlencoded","extended","set","cookieName","secret","resave","saveUninitialized","cookie","secure","duration","activeDuration","genid","req","genuuid","res","next","console","log","headers","header","get","sendFile","port","process","env","PORT","listen"],"mappings":";;AAeA;;AAfA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,OAAOD,QAAQ,MAAR,CAAb;AACA,IAAME,KAAKF,QAAQ,IAAR,CAAX;AACA,IAAMG,UAAUH,QAAQ,eAAR,CAAhB;AACA,IAAMI,SAASJ,QAAQ,QAAR,CAAf;AACA,IAAMK,eAAeL,QAAQ,eAAR,CAArB;AACA,IAAMM,aAAaN,QAAQ,aAAR,CAAnB;AACA,IAAMO,UAAUP,QAAQ,iBAAR,CAAhB;AACA,IAAMQ,WAAWR,QAAQ,UAAR,CAAjB;AACA,IAAMS,gBAAgBT,QAAQ,gBAAR,EAA0BU,QAAhD;AACA,IAAMC,OAAOX,QAAQ,aAAR,CAAb;AACA,IAAMY,MAAMZ,QAAQ,cAAR,CAAZ;AACA,IAAMa,SAASb,QAAQ,QAAR,CAAf;AACA,IAAMc,QAAQd,QAAQ,SAAR,CAAd;AACA,IAAMe,WAAYf,QAAQ,UAAR,CAAlB;;;AAIA,IAAMgB,KAAKD,SAASE,UAApB;AACA,IAAMC,iBAAiBlB,QAAQ,8BAAR,CAAvB;AACA,IAAMmB,aAAanB,QAAQ,qCAAR,CAAnB;;AAEA,IAAMoB,MAAMrB,SAAZ;AACAqB,IAAIC,GAAJ,CAAQtB,QAAQuB,MAAR,CAAerB,KAAKsB,IAAL,CAAUC,SAAV,EAAoB,uBAApB,CAAf,CAAR;AACAJ,IAAIC,GAAJ,CAAQjB,OAAO,KAAP,CAAR;AACAgB,IAAIC,GAAJ,CAAQf,WAAWmB,IAAX,EAAR;AACAL,IAAIC,GAAJ,CAAQf,WAAWoB,UAAX,CAAsB,EAACC,UAAS,KAAV,EAAtB,CAAR;AACAP,IAAIC,GAAJ,CAAQhB,iCAAR;AACAe,IAAIQ,GAAJ,CAAQ,aAAR,EAAuB,CAAvB,E,CAA0B;AAC1BR,IAAIC,GAAJ,CAAQd,QAAQ;AACdsB,cAAW,YADG;AAEdC,8BAFc;AAGdC,UAAQ,KAHM;AAIdC,qBAAmB,IAJL;AAKdC,UAAQ,EAAEC,QAAQ,IAAV,EALM;AAMdC,YAAU,KAAK,EAAL,GAAU,IANN;AAOdC,kBAAgB,IAAI,EAAJ,GAAS;AAPX,CAAR,CAAR;AASAhB,IAAIC,GAAJ,CAAQd,QAAQ;AACd8B,SAAO,eAASC,GAAT,EAAc;AACnB,WAAOC,SAAP,CADmB,CACF;AAClB,GAHa;AAIdT;AAJc,CAAR,CAAR;AAMAV,IAAIC,GAAJ,CAAQ,UAAUiB,GAAV,EAAeE,GAAf,EAAoBC,IAApB,EAA0B;AAC9BC,UAAQC,GAAR,CAAYL,IAAIM,OAAhB;AACA;AACA;AACA;AACA;AACA;AACA;AACCJ,MAAIK,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAL,MAAIK,MAAJ,CAAW,8BAAX,EAA2C,GAA3C;AACDJ;AACH,CAXD;;AAaArB,IAAI0B,GAAJ,CAAQ,GAAR,EAAY,UAASR,GAAT,EAAaE,GAAb,EAAiBC,IAAjB,EAAsB;AAChCD,MAAIO,QAAJ,CAAa9C,KAAKsB,IAAL,CAAUC,SAAV,EAAoB,iCAApB,CAAb;AACD,CAFD;AAGAJ,IAAIC,GAAJ,CAAQ,aAAR,EAAsBH,cAAtB;AACAE,IAAIC,GAAJ,CAAQ,OAAR,EAAgBF,UAAhB;;AAEA,IAAM6B,OAAOC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;AACA/B,IAAIgC,MAAJ,CAAWJ,IAAX","file":"index.js","sourcesContent":["const express = require('express');\nconst path = require('path');\nconst fs = require('fs');\nconst favicon = require('serve-favicon');\nconst logger = require('morgan');\nconst cookieParser = require('cookie-parser');\nconst bodyParser = require('body-parser');\nconst session = require('express-session');\nconst passport = require('passport');\nconst LocalStrategy = require('passport-local').Strategy;\nconst ejwt = require('express-jwt');\nconst jwt = require('jsonwebtoken');\nconst multer = require('multer');\nconst mongo = require('mongodb');\nconst mongoose =  require('mongoose');\nimport {secretKey,saveUninitialized,resave,sessionKey} from './globals/DbConfig';\n\n\nconst db = mongoose.connection;\nconst userManagement = require('./routes/userManagementRoute')\nconst PageAccess = require('./routes/pageAccess/PageAccessRoute')\n\nconst app = express();\napp.use(express.static(path.join(__dirname,'../client/dist/build/')));\napp.use(logger('dev'));\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({extended:false}));\napp.use(cookieParser(secretKey));\napp.set('trust proxy', 1) // trust first proxy\napp.use(session({\n  cookieName:\"gsessionID\",\n  secret: sessionKey,\n  resave: false,\n  saveUninitialized: true,\n  cookie: { secure: true },\n  duration: 30 * 60 * 1000,\n  activeDuration: 5 * 60 * 1000\n}));\napp.use(session({\n  genid: function(req) {\n    return genuuid() // use UUIDs for session IDs\n  },\n  secret: sessionKey\n}))\napp.use(function (req, res, next) {\n    console.log(req.headers)\n    //  res.header(\"Access-Control-Allow-Origin\", \"*\");\n    //  res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept, x-auth-token\");\n    // res.header('Access-Control-Allow-Origin', '*');\n    // res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, PATCH, DELETE');\n    // res.header('Access-Control-Allow-Headers', \"*\");\n    // res.header('Access-Control-Allow-Credentials', true);\n     res.header(\"Access-Control-Allow-Origin\", \"*\");\n     res.header(\"Access-Control-Allow-Headers\", \"*\");\n    next();\n});\n\napp.get('/',function(req,res,next){\n  res.sendFile(path.join(__dirname,'../client/dist/build/index.html'));\n})\napp.use('/usersLogin',userManagement);\napp.use('/page',PageAccess)\n\nconst port = process.env.PORT || 5000;\napp.listen(port);"]}